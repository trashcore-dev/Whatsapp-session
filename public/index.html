<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WhatsApp Session Generator</title>
<style>
body {
  background: #1f1f2e;
  color: #fff;
  font-family: Arial, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
}
h1 { color: #00ffd5; }
input, button { padding: 10px; margin: 10px; border-radius: 5px; border: none; }
input { width: 200px; }
button { background: #00ffd5; color: #000; cursor: pointer; }
#code { margin-top: 20px; font-weight: bold; }
</style>
</head>
<body>
<h1>WhatsApp Session Generator</h1>
<input type="text" id="phone" placeholder="Enter phone number" />
<button id="generate">Generate 8-digit Code</button>
<div id="code"></div>

<script>
document.getElementById('generate').addEventListener('click', async () => {
  const phone = document.getElementById('phone').value.trim();
  const codeDiv = document.getElementById('code');
  if(!phone) return codeDiv.textContent = 'Enter your phone number';

  try {
    const res = await fetch('/request-code', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ phone })
    });
    const data = await res.json();
    if(data.code){
      codeDiv.textContent = `Send this code to WhatsApp and link: ${data.code}`;
    } else {
      codeDiv.textContent = `Error: ${data.error}`;
    }
  } catch(err) {
    codeDiv.textContent = `Error: ${err.message}`;
  }
});
</script>
</body>
</html>
